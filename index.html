<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
  <script type="text/javascript" src="js/main.js"></script>



</head>
<body>
	<script type="text/javascript">
    var currentTime = new Date().getTime();
    var width = window.innerWidth;
    var height = window.innerHeight;	
    
    var app = Elm.Main.init({flags: {currentTime: currentTime, width: width, height: height}});
    
 //    app.ports.saveToLocalStorage.subscribe(function(data) {
 //  		localStorage.setItem(data.filename, data.content);
	// });

	app.ports.loadFromLocalStorage.subscribe(function(key) {
  		var result = localStorage.getItem(key);
		var payload;
		if (result){
			payload = { filename : key, content : result };
		} else {
			payload = { noData : key };
		}
		app.ports.loadedFromLocalStorage.send(payload); 
	});

    </script>
</body>

</html>